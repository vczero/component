var Calendar=(function(){var k=function(a,b){this.div=document.getElementById(a);var w=this.div.style.width||390;var h=this.div.style.height||(300-30);this.width=parseInt(w)>=360?w:360;this.height=parseInt(h)>=180?h:180;this.date=b;this.div.style.width=this.width+'px';this.div.style.height=this.height+'px'};k.week=['星期一','星期二','星期三','星期四','星期五','星期六','星期日'];k.prototype.showUI=function(c){var d=document.getElementById('vczero_celldom_0');if(!!d){for(var e=0;e<35;e++){var f=document.getElementById('vczero_celldom_'+e);f.onclick=null;this.div.removeChild(f)}}var g=this.width,height=this.height,cell={width:(parseInt(g)-20)/7,height:(parseInt(height)-30-20)/5},monthArr=this._monthPanel(this.date);this.div.style.paddingLeft='8px';this.div.style.border='2px solid #57ABFF';this.div.style.cursor='default';this.div.style.fontFamily='微软雅黑';this._addHeader();this._addWeekday();for(var i=0;i<35;i++){var h=document.createElement('div');h.style.width=cell.width+'px';h.style.height=cell.height+'px';h.style.display='inline-block';h.style.float='left';h.style.cursor='pointer';h.style.textAlign='center';h.id='vczero_celldom_'+i;h.style.lineHeight=cell.height+'px';h.setAttribute('date',monthArr.date[i]);h.innerHTML=monthArr.date[i].getDate();if(i<28){h.style.borderBottom='1px solid #C8CACC'}if(i<monthArr.preLen||i>=monthArr.currentLen+monthArr.preLen){h.style.color='#BFBFBF'}this.div.appendChild(h)}var j=this;this.div.addEventListener('click',function(e){var a=e.target;if(a.id.indexOf('vczero_celldom_')>-1){var b=new Date(a.getAttribute('date')).toLocaleString();c(b)}})};k.prototype._addHeader=function(){var c=document.getElementById('vczero_datediv');if(!!c){c.onclick=null;this.div.removeChild(c)}var d=document.createElement('div');d.style.height='22px';d.style.width=this.div.style.width||'800px';var e=document.createElement('div');e.style.width='200px';e.style.height='22px';e.style.margin='0 auto';e.style.textAlign='center';e.style.fontWeight='bold';e.id='vczero_datediv'var f=document.createElement('div');f.innerHTML='<';f.style.display='inline-block';f.style.float='left';f.style.width='50px';f.style.cursor='pointer';f.style.color='#C5BFBF';var g=this;f.addEventListener('click',function(a){var b=parseInt(g.date.getFullYear()),month=parseInt(g.date.getMonth());if(month===0){g.date=new Date(b-1,11,1)}else{g.date=new Date(b,month-1,1)}g.showUI(function(){})});var h=document.createElement('div');h.innerHTML='>';h.style.display='inline-block';h.style.float='left';h.style.width='50px';h.style.cursor='pointer';h.style.color='#C5BFBF';h.addEventListener('click',function(a){var b=parseInt(g.date.getFullYear()),month=parseInt(g.date.getMonth());if(month===11){g.date=new Date(b+1,0,1)}else{g.date=new Date(b,month+1,1)}g.showUI(function(){})});var i=document.createElement('div');i.style.display='inline-block';i.style.float='left';i.style.width='100px';i.innerHTML=this.date.getFullYear()+'年'+(this.date.getMonth()+1)+'月';e.appendChild(f);e.appendChild(i);e.appendChild(h);this.div.appendChild(e)}k.prototype._addWeekday=function(){var a=document.getElementById('vczero_week_0');if(!!a){for(var i=0;i<7;i++){var b=document.getElementById('vczero_week_'+i);b.onclick=null;this.div.removeChild(b)}}for(var i=0;i<7;i++){var c=document.createElement('div');c.style.width=(parseInt(this.width)-20)/7+'px';c.style.height='20px';c.style.display='inline-block';c.style.float='left';c.style.color='#BFBFBF';c.style.fontWeight='bold';c.style.textAlign='center';c.id='vczero_week_'+i;c.innerHTML=k.week[i];this.div.appendChild(c)}}k.prototype._monthPanel=function(a){var a=a||new Date(),year=a.getFullYear(),month=a.getMonth(),day=a.getDate(),week=a.getDay(),currentDays=new Date(year,month+1,0).getDate(),preDays=new Date(year,month,0).getDate(),firstDay=new Date(year,month,1),firstCell=firstDay.getDay()===0?6:firstDay.getDay()-1,bottomCell=35-currentDays-firstCell;var b=[];for(var p=firstCell;p>0;p--){b.push(new Date(year,month-1,preDays-p+1))}var d=b.length;var e=[];for(var c=0;c<currentDays;c++){e.push(new Date(year,month,c+1))}var f=[];for(var n=0;n<bottomCell;n++){f.push(new Date(year,month+1,n+1))}b=b.concat(e,f);return{date:b,preLen:d,currentLen:e.length}};return k})();